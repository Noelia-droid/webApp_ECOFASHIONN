<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Mi Carrito</title>
    <link rel="stylesheet" href="/assets/css/sidebar_USER.css" />
    <link rel="stylesheet" href="/assets/css/header.css" />
    <link rel="stylesheet" href="/assets/css/dashboard_COMPRADOR(CARRITO).css" />
    <script src="https://unpkg.com/lucide@latest"></script>
</head>

<body>

    <body>

        <!-- Incluir el sidebar desde sidebar_USER.html -->
        <div id="sidebar-container"></div>

            <!-- Incluir el HEADER desde header.html -->
            <div id="header-container"></div>

        <!--SECCIÓN CARRITO DE COMPRAS-->
        <div class="shopcartcontainer">
            <main class="main">
                <section class="cart-header">
                    <div class="icon-cart">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                            <path
                                d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"
                                stroke="#333" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                        </svg>
                    </div>
                    <h2>Mi Carrito</h2>
                    <span class="badge" id="productCount">1 producto</span>
                </section>

                <div class="cart-content">
                    <div class="cart-items" id="cartItems">
                        <div class="empty-cart">
                            <svg width="100" height="100" viewBox="0 0 100 100" fill="none">
                                <circle cx="50" cy="50" r="40" stroke="#e7e1da" stroke-width="2" />
                                <path d="M30 50H70M50 30V70" stroke="#e7e1da" stroke-width="2" stroke-linecap="round" />
                            </svg>
                            <h3>Tu carrito está vacío</h3>
                            <p>Agrega productos para comenzar tu compra</p>
                        </div>
                    </div>

                    <aside class="order-summary" id="orderSummary">
                        <h3>Resumen del pedido</h3>
                        <div id="summaryItems"></div>
                        <hr />
                        <div class="summary-total">
                            <span>Total</span>
                            <span id="totalPrice">€0.00</span>
                        </div>
                        <button class="checkout-btn" id="checkoutBtn" disabled>Finalizar Compra</button>
                        <p class="terms">Al confirmar tu compra, aceptas nuestros términos y condiciones</p>
                    </aside>
                </div>
            </main>
        </div>

        <!-- --------Scripts---------- -->

        <!--SIDEBAR-->
        <script>
            // Cargar el sidebar y luego inicializar su funcionalidad
            fetch('/pages/sidebar_USER.html')
                .then(response => response.text())
                .then(data => {
                    document.getElementById('sidebar-container').innerHTML = data;

                    // Cargar el script del sidebar DESPUÉS de que el HTML esté cargado
                    const script = document.createElement('script');
                    script.src = '/assets/js/sidebar_USER.js';
                    document.body.appendChild(script);
                })
                .catch(error => console.error('Error cargando sidebar:', error));
        </script>

        <!--HEADER-->
        <script>
            fetch('/pages/header.html')
                .then(response => response.text())
                .then(data => {
                    document.getElementById('header-container').innerHTML = data;
                    lucide.createIcons(); // vuelve a aplicar iconos en el header cargado
                })
                .catch(error => console.error('Error cargando header:', error));
        </script>

        <!--LUCIDE ICONS-->
        <script src="https://unpkg.com/lucide@latest"></script>
        <script>
            lucide.createIcons();
        </script>

        <script src="/assets/js/dashboard_USER(CARRITO).js"></script>
    </body>

</html>